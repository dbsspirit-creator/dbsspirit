<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>重生那天成拔萃之魂，我手握12篇範文解密惡龍盤踞的古籍</title>
<link rel="stylesheet" href="css/1_variables.css">
<link rel="stylesheet" href="css/2a_buttons.css">
<link rel="stylesheet" href="css/2b_cards.css">
<link rel="stylesheet" href="css/2c_modals.css">
<link rel="stylesheet" href="css/2d_layout.css">
<link rel="stylesheet" href="css/4_animations.css">
<link rel="stylesheet" href="css/3_screens.css">
<script>window.questionsDB = {};</script>
<script src="data/question_data_1_jr.js"></script>
<script src="data/question_data_2_jr.js"></script>
<script src="data/question_data_3_jr.js"></script>
<script src="data/question_data_4_jr.js"></script>
<script src="data/question_data_5_jr.js"></script>
<script src="data/question_data_6_jr.js"></script>
<script src="data/question_data_7_jr.js"></script>
<script src="data/question_data_8_jr.js"></script>
<script src="data/question_data_9_jr.js"></script>
<script src="data/question_data_10_jr.js"></script>
<script src="data/question_data_11_jr.js"></script>
<script src="data/question_data_12_jr.js"></script>
<script src="data/question_data_13_jr.js"></script>
<script src="data/question_data_14_jr.js"></script>
<script src="data/question_data_15_jr.js"></script>
<script src="data/question_data_16_jr.js"></script>
<script src="data/question_data_1_sr.js"></script>
<script src="data/question_data_2_sr.js"></script>
<script src="data/question_data_3_sr.js"></script>
<script src="data/question_data_4_sr.js"></script>
<script src="data/question_data_5_sr.js"></script>
<script src="data/question_data_6_sr.js"></script>
<script src="data/question_data_7_sr.js"></script>
<script src="data/question_data_8_sr.js"></script>
<script src="data/question_data_9_sr.js"></script>
<script src="data/question_data_10_sr.js"></script>
<script src="data/question_data_11_sr.js"></script>
<script src="data/question_data_12_sr.js"></script>
<script src="data/question_data_13_sr.js"></script>
<script src="data/question_data_14_sr.js"></script>
<script src="data/question_data_15_sr.js"></script>
<script src="data/question_data_16_sr.js"></script>
</head>
<body oncontextmenu="return false;">
<div style="display:none;">
<img src="images/ui/banner.jpg">
<img src="images/bg/login_bg.jpg">
<img src="images/results/img_perfect.PNG">
<img src="images/results/img_success.PNG">
<img src="images/results/img_defeat.PNG">
<img src="images/ui/loading_icon.PNG">
<img src="images/ui/btn_setting.PNG">
<img src="images/ui/btn_music.PNG">
<img src="images/ui/btn_sound.PNG">
<img src="images/ui/btn_menu.PNG">
<img src="images/achievements/ach_locked.PNG">
<img src="images/ui/icon_coin.PNG">
</div>
<div id="damageOverlay"></div>
<div id="screen-loading" class="screen active">
<img src="images/ui/school_logo.jpg" alt="Logo" class="loading-logo" onerror="this.style.display='none'">
<h2 style="color: var(--primary-blue); margin-top: 10px;">資源載入中⋯⋯</h2>
<div class="loading-bar-container">
<div class="loading-bar-fill" id="loadingBar">
<img src="images/ui/loading_icon.PNG" class="loading-icon-indicator" alt="icon">
</div>
</div>
<div id="loadingText" style="margin-top: 20px; color: #666; font-weight: bold;">0%</div>
</div>
<div class="container">
<div class="header-bar">
<img src="images/ui/banner.jpg" class="header-banner" alt="Banner" loading="eager">
</div>
<div id="screen-login" class="screen">
<img src="images/ui/school_logo.jpg" alt="校徽" class="profile-logo" style="width:100px; height:100px;" onerror="this.src='https://via.placeholder.com/100?text=Logo'">
<h2 style="color: var(--primary-blue);">拔萃之魂</h2>
<div class="input-group">
<label>學生 ID：</label>
<input type="text" id="inputStudentId" class="form-input" placeholder="請輸入學生 ID">
</div>
<div class="input-group">
<label>密碼：</label>
<input type="password" id="inputPassword" class="form-input" placeholder="請輸入密碼">
</div>
<button class="btn-main" onclick="handleLogin()">進入試煉</button>
</div>
<div id="screen-menu" class="screen">
<div class="profile-card">
<img src="images/ui/school_logo.jpg" alt="校徽" class="profile-logo" onclick="showStatsModal(); event.stopPropagation();" style="cursor: pointer; pointer-events: auto;" onerror="this.src='https://via.placeholder.com/80?text=Logo'">
<div class="profile-details">
<div class="profile-row">
<span><strong id="menuName">--</strong> (<span id="menuClass">--</span>)</span>
</div>
<div class="profile-row">
<span>稱號：<strong id="menuTitle" class="clickable-underline" onclick="showTitlesModal(); event.stopPropagation();">初心新手</strong></span>
<span>等級 <span id="menuLevel">1</span></span>
</div>
<div class="bar-container" style="height:6px; margin-top:2px;">
<div class="xp-fill" id="menuXPBar" style="width:0%;"></div>
</div>
<div style="text-align:right; font-size:0.7rem; color:#555;">經驗值: <span id="menuXP">0</span>/9999</div>
<div style="font-size:0.85rem; color:var(--primary-blue); font-weight:bold; margin-top:2px;">浩然之氣：<span id="menuEnergy">100</span>/100</div>
<div class="bar-container" style="height:6px;">
<div class="energy-fill" id="menuEnergyBar" style="width:100%;"></div>
</div>
</div>
</div>
<div class="menu-layout">
<button class="menu-btn" onclick="showSubMenu('single')">
<img src="images/ui/icon_single.PNG" alt="獨立" class="menu-btn-icon" onerror="this.style.display='none'; this.parentNode.innerHTML='<span>⚔️</span>獨立篇章'">
<span>獨立篇章</span>
</button>
<button class="menu-btn" onclick="showSubMenu('mix')">
<img src="images/ui/icon_mix.PNG" alt="混合" class="menu-btn-icon" onerror="this.style.display='none'; this.parentNode.innerHTML='<span>🐉</span>混合挑戰'">
<span>混合挑戰</span>
</button>
<button class="menu-btn" onclick="showPokedex()">
<img src="images/ui/icon_book.PNG" alt="圖鑑" class="menu-btn-icon" onerror="this.style.display='none'; this.parentNode.innerHTML='<span>📖</span>惡龍圖鑑'">
<span>惡龍圖鑑</span>
</button>
<button class="menu-btn" onclick="showDragonSeal()">
<img src="images/ui/icon_trophy.PNG" alt="成就" class="menu-btn-icon" onerror="this.style.display='none'; this.parentNode.innerHTML='<span>🏆</span>龍印寶典'">
<span>龍印寶典</span>
</button>
</div>
<div id="subMenuSingle" class="sub-menu" style="min-height: 50vh;">
<h3 style="color:var(--primary-blue); border-bottom:2px solid #ccc; padding-bottom:2px; margin-bottom: 2px;">請選擇範文</h3>
<div id="singleChapterList"></div>
<div id="singleConfirmArea">
<p style="margin: 0; font-weight:bold; color:var(--text-dark); font-size: 0.95rem;">已選：<span id="singleSelectedTitle" style="color:var(--primary-blue);">--</span></p>
<button class="btn-main" style="margin-top: 5px; padding: 8px 20px; font-size: 1rem;" onclick="confirmSingleGame()">確認挑戰</button>
</div>
<button class="btn-bottom-back" style="margin-top: auto;" onclick="resetMenu()">返回主目錄</button>
</div>
<div id="subMenuMix" class="sub-menu" style="min-height: 50vh;">
<h3 style="color:var(--primary-blue); border-bottom:2px solid #ccc; padding-bottom:2px; margin-bottom: 2px;">請選擇最少兩篇範文</h3>
<div class="mix-action-row" style="margin-bottom:10px;">
<button class="btn-secondary" style="background:#27ae60; color:white; margin:0;" onclick="selectAllMix()">全選</button>
<button class="btn-secondary" style="background:#e74c3c; color:white; margin:0;" onclick="deselectAllMix()">取消全選</button>
<div class="mix-blue-wrapper">
<span>隨機</span>
<select id="mixRandomCount">
<option value="2">2</option><option value="3">3</option><option value="4">4</option>
<option value="5">5</option><option value="6">6</option><option value="7">7</option>
<option value="8">8</option><option value="9">9</option><option value="10">10</option>
<option value="11">11</option><option value="12">12</option><option value="13">13</option>
<option value="14">14</option><option value="15">15</option><option value="16">16</option>
</select>
<button onclick="randomSelectMix()">立即挑戰</button>
</div>
</div>
<div id="mixChapterList"></div>
<div style="text-align:center; margin-top:5px;">
<span id="mixCount" style="color:var(--primary-blue); font-weight:bold; display:block; margin-bottom:5px;">已選：0</span>
<button class="btn-main" style="padding: 8px 20px; font-size: 1rem;" onclick="confirmMixMode()">開始混合挑戰</button>
<button class="btn-bottom-back" style="margin-left:5px;" onclick="resetMenu()">返回主目錄</button>
</div>
</div>
</div>
<div id="screen-pokedex" class="screen">
<h2 style="color:var(--primary-blue); margin-bottom:5px;">惡龍圖鑑</h2>
<div class="pokedex-grid" id="pokedexContainer"></div>
<button class="btn-bottom-back" style="margin-top:auto; margin-bottom: 0;" onclick="switchScreen('screen-menu')">返回主目錄</button>
</div>
<div id="screen-achievements" class="screen">
<h2 style="color:var(--primary-blue); margin-bottom:5px;">龍印寶典</h2>
<div class="pokedex-grid" id="sealContainer"></div>
<button class="btn-bottom-back" style="margin-top:auto; margin-bottom: 0;" onclick="switchScreen('screen-menu')">返回主目錄</button>
</div>
<div id="screen-shop" class="screen">
<h2 style="color:var(--primary-blue); margin-bottom:5px;">資源商店</h2>
<div class="shop-header-row">
<div class="shop-tabs">
<button class="tab-btn-pill active" id="tabBuy" onclick="switchShopTab('buy')">採購</button>
<button class="tab-btn-pill" id="tabSmelt" onclick="switchShopTab('smelt')">熔煉</button>
<button class="tab-btn-pill" id="tabGacha" onclick="switchShopTab('gacha')">祈願</button>
</div>
<div class="coin-capsule">
<img src="images/ui/icon_coin.PNG" class="coin-icon-img" alt="G" onerror="this.style.display='none'">
<span id="coinDisplay">0</span>
</div>
</div>
<div id="shopContentArea" style="width:100%; flex:1; overflow-y:auto; padding:5px;"></div>
<button class="btn-bottom-back" style="margin-top:auto; margin-bottom: 0;" onclick="switchScreen('screen-menu')">返回主目錄</button>
</div>
<div id="screen-inventory" class="screen">
<h2 style="color:var(--primary-blue); margin-bottom:5px;">勇者背包</h2>
<div class="inventory-tabs">
<button class="tab-btn active" onclick="filterInventory('all', this)">全部</button>
<button class="tab-btn" onclick="filterInventory('fragment', this)">碎片</button>
<button class="tab-btn" onclick="filterInventory('item', this)">成品</button>
</div>
<div class="pokedex-grid" id="inventoryContainer" style="margin-top:5px;"></div>
<button class="btn-bottom-back" style="margin-top:auto; margin-bottom: 0;" onclick="switchScreen('screen-menu')">返回主目錄</button>
</div>
<div id="screen-daily" class="screen">
<h2 style="color:var(--primary-blue); margin-bottom:5px;">每日任務</h2>
<div class="pokedex-grid" id="dailyContainer" style="margin-top:5px; display:block;"></div>
<button class="btn-bottom-back" style="margin-top:auto; margin-bottom: 0;" onclick="switchScreen('screen-menu')">返回主目錄</button>
</div>
<div id="screen-pet" class="screen">
<h2 style="color:var(--primary-blue); margin-bottom:5px;">龍魄靈獸</h2>
<div class="pokedex-grid" id="petContainer" style="margin-top:5px;"></div>
<button class="btn-bottom-back" style="margin-top:auto; margin-bottom: 0;" onclick="switchScreen('screen-menu')">返回主目錄</button>
</div>
<div id="screen-difficulty" class="screen">
<h2 style="color:var(--primary-blue);">請選擇難度級別</h2>
<div style="text-align:center; margin-bottom:15px; color:#555;">
<p id="energyCostInfo"></p>
</div>
<button class="difficulty-btn btn-junior" onclick="initGame('junior')">初階 (多項選擇)</button>
<button class="difficulty-btn btn-senior" onclick="initGame('senior')">高階 (填寫答案)</button>
<div style="display:flex; gap:10px; width:100%; max-width:400px; justify-content:center; margin-top:30px;">
<button class="btn-secondary" style="background:#f1c40f; color:white; flex:1; font-size:1rem; padding:10px 0;" onclick="backToChapterSelection()">返回選單</button>
<button class="btn-secondary" style="background:#7f8c8d; color:white; flex:1; font-size:1rem; padding:10px 0;" onclick="resetMenu(); switchScreen('screen-menu')">返回主目錄</button>
</div>
</div>
<div id="screen-game" class="screen">
<canvas id="particleCanvas"></canvas>
<div class="battle-hud">
<div class="battle-hud-left">
<img src="images/ui/school_logo.jpg" alt="Logo" class="profile-logo" style="width:50px; height:50px; pointer-events: auto;" onclick="showStatsModal(); event.stopPropagation();">
<div style="font-size:1.1rem; font-weight:bold;"><span id="gameUser"></span></div>
<div style="color:var(--primary-blue); font-size:1rem;">稱號：<strong class="clickable-underline" onclick="showTitlesModal(); event.stopPropagation();" style="color:var(--text-dark);"><span id="gameTitle"></span></strong></div>
</div>
<div class="battle-hud-right">
<div class="hud-row"><span>等級 <span id="gameLevelNum"></span> 經驗值 <span id="xpText"></span></span></div>
<div class="bar-container"><div class="xp-fill" id="xpBar" style="width:0%;"></div></div>
<div class="hud-row"><span>浩然之氣 <span id="battleEnergyText"></span></span></div>
<div class="bar-container"><div class="energy-fill" id="battleEnergyBar" style="width:100%;"></div></div>
<div class="hud-row"><span>生命值 <span id="hpText"></span></span></div>
<div class="bar-container"><div class="hp-fill" id="hpBar" style="width:100%;"></div></div>
</div>
</div>
<div class="boss-area">
<img id="bossImage" src="" alt="Boss Dragon" class="boss-img">
<div id="vfxLayer" class="vfx-layer"></div>
</div>
<div class="glass-panel">
<div id="battleChapterText" class="battle-chapter-name"></div>
<div id="gameProgress" class="progress-display">進度：0 / 0</div>
<div class="question-box" id="questionBox">
<div class="poem-line" id="qLine">...</div>
<p>請解釋 <span class="target-word" id="qWord">...</span> 的意思：</p>
<div id="inputAreaSenior" style="display:none;">
<input type="text" id="answerInput" placeholder="請輸入完整解釋 (一字不漏)" autocomplete="off">
<button class="btn-main btn-attack" onclick="submitSeniorAnswer()">攻擊</button>
</div>
<div id="inputAreaJunior" class="mc-container" style="display:none;"></div>
<div class="error-msg" id="msgBox"></div>
</div>
</div>
<div class="game-footer-btn">
<button class="btn-bottom-back" onclick="goHome()">返回主目錄</button>
</div>
</div>
<div id="screen-result" class="screen">
<div class="glass-panel">
<div id="resultImageContainer">
<img id="resultImg" src="" alt="Result">
</div>
<h2 id="endTitle"></h2>
<div id="endStatsRow" style="text-align:center; font-weight:bold; color:var(--primary-red); font-size: 1.1rem; margin-top: 5px;"></div>
<div style="width:100%; max-height:400px; overflow-y:auto; margin-top:20px; border:1px solid #eee;">
<table class="result-table">
<thead>
<tr><th style="width:40%;">題目</th><th style="width:30%;">你的答案</th><th style="width:30%;">正確答案</th></tr>
</thead>
<tbody id="resultBody"></tbody>
</table>
</div>
</div>
<div style="display:flex; gap:15px; width:100%; max-width:500px; justify-content:center; margin-top:20px;">
<button class="btn-main" style="background:var(--primary-red); flex:1; margin:0;" onclick="backToChapterSelection()">繼續挑戰！</button>
<button class="btn-main" style="background:#7f8c8d; flex:1; margin:0;" onclick="backToMenuFromEnd()">返回主目錄</button>
</div>
</div>
<div id="contentModal">
<div class="modal-content">
<div class="modal-header">
<span id="modalTitle">篇章標題</span>
<span class="modal-close" onclick="closeContentModal()">×</span>
</div>
<div class="modal-body" id="modalBody">內容...</div>
<div style="padding:10px; background:#f0f0f0;">
<div style="text-align:center; font-weight:bold; margin-bottom:5px; color:#555;">溫習進度 (+1 浩然之氣 / 分鐘)</div>
<div class="timer-bar-wrapper">
<div class="timer-bar-container" id="pokedexTimerBarContainer">
<div class="timer-segment" id="seg0"></div><div class="timer-segment" id="seg1"></div>
<div class="timer-segment" id="seg2"></div><div class="timer-segment" id="seg3"></div>
<div class="timer-segment" id="seg4"></div><div class="timer-segment" id="seg5"></div>
<div class="timer-segment" id="seg6"></div><div class="timer-segment" id="seg7"></div>
<div class="timer-segment" id="seg8"></div><div class="timer-segment" id="seg9"></div>
</div>
<div class="timer-labels">
<span>1</span><span>2</span><span>3</span><span>4</span><span>5</span>
<span>6</span><span>7</span><span>8</span><span>9</span><span>10</span>
</div>
</div>
</div>
</div>
</div>
<div id="statsModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:10000; justify-content:center; align-items:center;">
<div class="modal-content" style="max-width:500px; background:#fff; border-radius:15px; overflow:hidden;">
<div class="modal-header">
<span>能力屬性</span>
<span class="modal-close" onclick="closeStatsModal()">×</span>
</div>
<div style="padding:20px; display:flex; justify-content:center; align-items:center; background:#f9f9f9;">
<div id="radarContainer"></div>
</div>
<div style="padding:10px; text-align:center; font-size:0.9rem; color:#666;">
<p>※ 屬性根據初階與高階答對題數綜合計算</p>
</div>
</div>
</div>
<div id="titlesModal">
<div class="modal-content">
<div class="modal-header">
<span>歷煉之路</span>
<span class="modal-close" onclick="closeTitlesModal()">×</span>
</div>
<div class="modal-body">
<div class="title-road-container" id="titleRoadContainer"></div>
</div>
</div>
</div>
<div id="helpModal" class="modal-backdrop" style="display:none; z-index:10000;">
<div class="modal-content" style="max-width:500px; background:#fff; border-radius:15px; overflow:hidden; display:flex; flex-direction:column; height:80%; max-height:80%;">
<div class="modal-header">
<span>試煉指南</span>
<span class="modal-close" onclick="closeHelp()">×</span>
</div>
<div id="helpBody" style="padding:20px; overflow-y:auto; flex:1; -webkit-overflow-scrolling: touch;"></div>
</div>
</div>
<div id="unlockModal">
<div class="modal-content" style="max-width:400px; text-align:center;">
<div class="modal-header" style="background:#f1c40f; color:white;">
<span>解鎖新龍印！</span>
</div>
<div class="modal-body" id="unlockModalBody" style="padding: 30px 20px;"></div>
<div style="padding:15px; background:#f9f9f9;">
<button class="btn-main" style="margin:0; background:#f1c40f; font-size:1rem; padding:10px 30px; color:white;" onclick="processNextUnlock()">知道了！</button>
</div>
</div>
</div>
<div id="dropModal" class="modal-backdrop" style="display:none;">
<div class="modal-content" style="max-width:400px; text-align:center;">
<div class="modal-header" style="background:#2ecc71; color:white;">
<span>意外收穫！</span>
</div>
<div class="modal-body" id="dropModalBody" style="padding: 30px 20px;">
</div>
<div style="padding:15px; background:#f9f9f9;">
<div style="display:flex; justify-content:center; width:100%;">
<button class="btn-main" style="margin:0; background:#2ecc71; color:white; font-size:1rem; padding:10px 30px;" onclick="claimDropReward()">馬上收下！</button>
</div>
</div>
</div>
</div>
<div id="gachaModal" class="modal-backdrop" style="display:none;">
<div class="modal-content" style="max-width:400px; text-align:center;">
<div class="modal-header" style="background:#f1c40f; color:white;">
<span>祈願結果</span>
</div>
<div class="modal-body" id="gachaModalBody" style="padding: 30px 20px;">
</div>
<div style="padding:15px; background:#f9f9f9;">
<button class="btn-main" style="margin:0; background:#f1c40f; color:white; font-size:1rem; padding:10px 30px;" onclick="document.getElementById('gachaModal').style.display='none'; updateCoreButtonVisibility();">收下</button>
</div>
</div>
</div>
<div id="smeltSelectModal" class="modal-backdrop" style="display:none;">
<div class="modal-content" style="width:90%; max-width:500px;">
<div class="modal-header" style="background:#8e44ad; color:white;">
<span>選擇合成材料</span>
<span class="modal-close" onclick="document.getElementById('smeltSelectModal').style.display='none'">×</span>
</div>
<div class="modal-body">
<div class="pokedex-grid" id="smeltInventoryGrid" style="max-height:300px; overflow-y:auto;"></div>
</div>
</div>
</div>
<div id="deleteModal" class="modal-backdrop" style="display:none;">
<div class="modal-content" style="max-width:350px;">
<div class="modal-header" style="background:#e74c3c; color:white;">出售物品</div>
<div class="modal-body" style="text-align:center; padding: 20px;">
<img id="deleteItemImg" src="" style="width:100px; height:100px; object-fit:contain; margin-bottom:10px;" onerror="this.src='images/ui/icon_core.PNG'">
<h3 id="deleteItemName" style="color:var(--primary-blue); margin:0 0 10px 0;">物品名稱</h3>
<div style="margin-bottom:15px; font-weight:bold; color:#555; background:#f5f5f5; padding:8px; border-radius:5px;">
數量：<span id="delCountVal" style="color:#d35400;">1</span> &nbsp;|&nbsp; 總額：<span id="delTotalVal" style="color:#d35400;">0</span>
</div>
<input type="range" id="deleteSlider" min="1" step="1" value="1" style="width:100%; margin:10px 0 20px 0; cursor:pointer;">
<div style="display:flex; justify-content:center; gap:10px;">
<button id="btnConfirmSell" class="btn-secondary" style="background:#e74c3c; color:white; flex:1;">確認出售</button>
<button class="btn-secondary" style="background:#95a5a6; color:white; flex:1;" onclick="document.getElementById('deleteModal').style.display='none'">取消</button>
</div>
</div>
</div>
</div>
<div id="buyModal" class="modal-backdrop" style="display:none;">
<div class="modal-content" style="max-width:350px;">
<div class="modal-header" style="background:#e74c3c; color:white;">購買物品</div>
<div class="modal-body" style="text-align:center; padding: 20px;">
<img id="buyItemImg" src="" style="width:100px; height:100px; object-fit:contain; margin-bottom:10px;" onerror="this.src='images/ui/icon_core.PNG'">
<h3 id="buyItemName" style="color:var(--primary-blue); margin:0 0 10px 0;">物品名稱</h3>
<div style="margin-bottom:15px; font-weight:bold; color:#555; background:#f5f5f5; padding:8px; border-radius:5px;">
數量：<span id="buyCountVal" style="color:#27ae60;">1</span> &nbsp;|&nbsp; 總額：<span id="buyTotalVal" style="color:#27ae60;">0</span>
</div>
<input type="range" id="buySlider" min="1" step="1" value="1" style="width:100%; margin:10px 0 20px 0; cursor:pointer;">
<div style="display:flex; justify-content:center; gap:10px;">
<button id="btnConfirmBuy" class="btn-secondary" style="background:#e74c3c; color:white; flex:1;">確認購買</button>
<button class="btn-secondary" style="background:#95a5a6; color:white; flex:1;" onclick="document.getElementById('buyModal').style.display='none'">取消</button>
</div>
</div>
</div>
</div>
<div id="smeltConfirmModal" class="modal-backdrop" style="display:none;">
<div class="modal-content" style="max-width:300px;">
<div class="modal-header" style="background:#8e44ad; color:white;">確認合成</div>
<div class="modal-body" style="text-align:center;">
<p>確定要進行熔煉嗎？<br>原材料將會消耗。</p>
<div style="display:flex; justify-content:center; gap:10px;">
<button class="btn-main" style="background:#8e44ad; flex:1; margin:0;" onclick="executeSmelt()">確定</button>
<button class="btn-main" style="background:#95a5a6; flex:1; margin:0;" onclick="document.getElementById('smeltConfirmModal').style.display='none'">取消</button>
</div>
</div>
</div>
</div>
<div id="recipeModal" class="modal-backdrop" style="display:none;">
<div class="modal-content" style="width:90%; height:80%; max-height:600px; display:flex; flex-direction:column; position:relative;">
<div class="modal-header" style="background:#8e44ad; color:white; flex-shrink:0;">
<span>合成公式</span>
<span class="modal-close" onclick="document.getElementById('recipeModal').style.display='none'">×</span>
</div>
<div style="flex:1; position:relative; overflow:hidden; background:#fdfdfd; display:flex; justify-content:center;">
<div onclick="prevRecipePage()" style="position:absolute; left:0; top:50%; transform:translateY(-50%); width:40px; height:80px; background:rgba(0,0,0,0.1); display:flex; align-items:center; justify-content:center; cursor:pointer; z-index:10; font-size:2rem; color:#8e44ad; user-select:none; border-top-right-radius:10px; border-bottom-right-radius:10px;">&#10094;</div>
<div onclick="nextRecipePage()" style="position:absolute; right:0; top:50%; transform:translateY(-50%); width:40px; height:80px; background:rgba(0,0,0,0.1); display:flex; align-items:center; justify-content:center; cursor:pointer; z-index:10; font-size:2rem; color:#8e44ad; user-select:none; border-top-left-radius:10px; border-bottom-left-radius:10px;">&#10095;</div>
<div id="recipeListBody" style="width:100%; height:100%; overflow-y:auto; padding:10px; display:flex; flex-direction:column; align-items:center;"></div>
</div>
</div>
</div>
<div id="detailModal" class="modal-backdrop" style="display:none;">
<div class="modal-content" style="max-width:400px; text-align:center; position:relative;">
<div class="modal-header" id="detailModalHeader">
<span id="detailModalTitle">詳情</span>
<span class="modal-close" onclick="document.getElementById('detailModal').style.display='none'" style="position:absolute; right:10px; top:10px; color:white; opacity:1;">×</span>
</div>
<div class="modal-body" id="detailModalBody" style="padding:30px 20px;"></div>
</div>
</div>
<div id="system-modal" class="modal-backdrop" style="display:none; z-index: 2147483647;">
<div class="modal-content" style="max-width:350px; text-align:center; overflow:hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
<div class="modal-header" id="sys-modal-header" style="background:var(--primary-blue); color:white;">
<span id="sys-modal-title">系統提示</span>
</div>
<div class="modal-body" style="padding: 25px 20px;">
<div id="sys-modal-msg" style="color:#2c3e50; font-size:1.1rem; line-height:1.5; font-weight:bold;"></div>
<input type="text" id="sys-modal-input" class="form-input" style="margin-top:15px; display:none; text-align:center;" autocomplete="off">
</div>
<div style="padding:15px; background:#f9f9f9; display:flex; gap:10px; justify-content:center;">
<button id="sys-btn-ok" class="btn-main" style="margin:0; flex:1; width:50%;">確定</button>
<button id="sys-btn-cancel" class="btn-main" style="margin:0; flex:1; width:50%; background:#95a5a6; display:none;">取消</button>
</div>
</div>
</div>
<div id="radialMenuContainer" class="radial-menu-container">
<div class="radial-items">
<div class="stack-item">
<button class="stack-btn" onclick="renderDailyTasks()">
<img src="images/ui/btn_daily.PNG" alt="Daily">
</button>
<span class="stack-label">每日任務</span>
</div>
<div class="stack-item">
<button class="stack-btn" onclick="renderShop()">
<img src="images/ui/btn_store.PNG" alt="Store">
</button>
<span class="stack-label">資源商店</span>
</div>
<div class="stack-item">
<button class="stack-btn" onclick="renderInventory()">
<img src="images/ui/btn_inventory.PNG" alt="Inventory">
</button>
<span class="stack-label">勇者背包</span>
</div>
<div class="stack-item">
<button class="stack-btn" onclick="renderPets()">
<img src="images/ui/btn_pet.PNG" alt="Pet">
</button>
<span class="stack-label">龍魄靈獸</span>
</div>
</div>
<button id="radialMainBtn" onclick="toggleRadialMenu()">
<div class="pulse-ring"></div>
<img src="images/ui/icon_core.PNG" alt="Menu">
</button>
</div>
<div id="floatingMenuContainer">
<div id="floatingSubMenu" class="hidden">
<button class="btn-control-float" onclick="showHelp()">
<img src="images/ui/btn_setting.PNG" alt="Setting">
</button>
<button class="btn-control-float" id="btnBGM" onclick="toggleMusic()">
<img src="images/ui/btn_music.PNG" alt="Music">
</button>
<button class="btn-control-float" id="btnSFX" onclick="toggleSFX()">
<img src="images/ui/btn_sound.PNG" alt="SFX">
</button>
</div>
<button id="floatingMainBtn">
<img src="images/ui/btn_menu.PNG" alt="Menu" onerror="this.src='images/ui/btn_setting.PNG'">
</button>
</div>
<div class="footer-bar" onclick="handleFooterClick()">©  拔萃男書院 | 千域教育 授權使用</div>
</div>
<script src="js/0_items.js"></script>
<script src="js/1_config.js"></script>
<script src="js/2_state.js"></script>
<script src="js/3_audio.js"></script>
<script src="js/4a_ui_core.js"></script>
<script src="js/4b_menu_main.js"></script>
<script src="js/4b_menu_chapter.js"></script>
<script src="js/4c_sys_shop.js"></script>
<script src="js/4c_sys_inventory.js"></script>
<script src="js/4c_sys_quests.js"></script>
<script src="js/4c_sys_pokedex.js"></script>
<script src="js/4c_sys_pets.js"></script>
<script src="js/4d_ui_charts.js"></script>
<script src="js/4e_ui_fx.js"></script>
<script src="js/5a_game_lobby.js"></script>
<script src="js/5b_game_battle.js"></script>
<script src="js/5c_game_end.js"></script>
<script src="js/6_main.js"></script>
</body>
</html>
