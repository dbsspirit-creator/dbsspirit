@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}
@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}
@keyframes explode {
    0% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.2) rotate(10deg); opacity: 0.8; }
    100% { transform: scale(2); opacity: 0; filter: blur(10px); }
}
.anim-explode { animation: explode 0.5s ease-out forwards; }

@keyframes segPulse {
    0% { transform: scale(1); filter: brightness(1); }
    50% { transform: scale(1.2); filter: brightness(1.5); }
    100% { transform: scale(1); filter: brightness(1); }
}
.timer-segment.pulse {
    animation: segPulse 0.5s ease-out;
}

@keyframes dragonCrash {
    0% { transform: translateY(0) scale(1); }
    50% { transform: translateY(50px) scale(1.2); }
    100% { transform: translateY(0) scale(1); }
}
.dragon-attack { animation: dragonCrash 0.4s ease-in-out forwards !important; }

@keyframes bossDamage {
    0% { transform: translateX(0); filter: brightness(1); }
    25% { transform: translateX(-10px); filter: brightness(2) hue-rotate(90deg); }
    50% { transform: translateX(10px); filter: brightness(3) hue-rotate(0deg); }
    75% { transform: translateX(-10px); filter: brightness(2) hue-rotate(-90deg); }
    100% { transform: translateX(0); filter: brightness(1); }
}
.boss-hit-flash {
    animation: marioStarFlash 0.3s linear infinite !important;
}

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

@keyframes shake {
    0% { transform: translate(1px, 1px) rotate(0deg); }
    10% { transform: translate(-1px, -2px) rotate(-1deg); }
    20% { transform: translate(-3px, 0px) rotate(1deg); }
    30% { transform: translate(3px, 2px) rotate(0deg); }
    40% { transform: translate(1px, -1px) rotate(1deg); }
    50% { transform: translate(-1px, 2px) rotate(-1deg); }
    60% { transform: translate(-3px, 1px) rotate(0deg); }
    70% { transform: translate(3px, 1px) rotate(-1deg); }
    80% { transform: translate(-1px, -1px) rotate(1deg); }
    90% { transform: translate(1px, 2px) rotate(0deg); }
    100% { transform: translate(1px, -2px) rotate(-1deg); }
}
.shake-box { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }

@keyframes correctPulse {
    0% { background-color: var(--white); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
    50% { background-color: #fff9c4; box-shadow: 0 0 20px #f1c40f; transform: scale(1.02); }
    100% { background-color: var(--white); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
}
.correct-flash { animation: correctPulse 0.5s ease-out; }

@keyframes attackMove {
    0% { transform: translateY(0); opacity: 1; }
    50% { transform: translateY(-400px) scale(0.5); opacity: 0.8; }
    100% { transform: translateY(-800px) scale(0); opacity: 0; }
}
.player-attack { animation: attackMove 0.6s ease-in forwards; }

@keyframes marioStarFlash {
    0% { filter: hue-rotate(0deg) brightness(1); }
    25% { filter: hue-rotate(90deg) brightness(2); }
    50% { filter: hue-rotate(180deg) brightness(3); }
    75% { filter: hue-rotate(270deg) brightness(2); }
    100% { filter: hue-rotate(360deg) brightness(1); }
}

/* VFX LAYER */
.vfx-layer {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    pointer-events: none;
    display: flex; justify-content: center; align-items: center;
    overflow: hidden;
    z-index: 10;
}

.slash-cross {
    position: absolute;
    width: 200%; height: 200%;
    background: transparent;
    opacity: 0;
}

.slash-cross.active {
    animation: crossSlash 0.4s ease-out forwards;
}

@keyframes crossSlash {
    0% {
        opacity: 1;
        background: linear-gradient(45deg, transparent 45%, white 48%, white 52%, transparent 55%),
                    linear-gradient(-45deg, transparent 45%, white 48%, white 52%, transparent 55%);
        transform: scale(0.8);
    }
    20% {
         background: linear-gradient(45deg, transparent 40%, #e74c3c 48%, #c0392b 52%, transparent 60%),
                    linear-gradient(-45deg, transparent 40%, #e74c3c 48%, #c0392b 52%, transparent 60%);
         transform: scale(1.1);
         filter: drop-shadow(0 0 10px rgba(0,0,0,0.8));
    }
    100% {
        opacity: 0;
        background: linear-gradient(45deg, transparent 45%, black 48%, black 52%, transparent 55%),
                    linear-gradient(-45deg, transparent 45%, black 48%, black 52%, transparent 55%);
        transform: scale(1.4);
    }
}
